import "c_string"; // strlen, @Remove: Once we have better strings
import "strings";

extern "C" {
    sprintf :: (buffer: *u8, format: string, args: ...any) -> int;
    printf  :: (format: string, args: ...any) -> int;
}

Print2 :: (x, y, z: int, args: ...any) -> int {
    print("x, y, z = % % %", x, y, z);
    for arg in args {
        print("arg.type = %\n", *arg.type);
    }

    return 5;
}

Print :: (format: string, args: ...any) -> int {
    fmtLen := strlen(format);
    print("Format string = %\n", format);
    sb := NewStringBuilder(1024);
    

    // Parse the format string
    placeholderIndicies: [..]int;


    for i in 0..strlen(format) {
        c := (cast(*u8)format)[i];
        print("% ", c);
    }

    for arg in args {
        print("arg.type = %\n", *arg.type);
    }

    sb.free();

    return 0;
}