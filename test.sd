Vector2 :: struct {
    x: float;
    y: float;
}

Entity :: struct {
    pos: [2]Vector2; // offset = 0, elem_0 = 16
}

C :: struct {
    x: int;
    y: int;
}

B :: struct {
    c: [2]C;
}

A :: struct {
    b: [2]B;
}

Doom :: struct {
    a: [2]A;
}

main :: () {

    // v := [Vector2{1, 4}, {3, 9}];

    // print("%", v[1].x);
    doom := [
        Doom{
            a = [{
                b = [{
                    c = [{x = 5, y = 10}]
                }]
            }]
        },
        Doom{
            a = [{
                b = [{
                    c = [{x = 15, y = 20}]
                }]
            }]
        },
    ];

    // e := [Entity{pos = [{1, 3}, {4, 9}]}, Entity{pos = [{16, 19}, {27, 32}]}];

    print("%", doom[1].a[0].b[0].c[0].y);

    // e[0].pos[0].x
    // Push address of e
    // Emit subscript expr
    // Pop subscript expr
    // Pop address of e
    // Add subscript expr to addr of e
    // Push address of e[0]
    // Add member offset of pos
    // Push addr of pos
    // Emit subscript
    // Pop subscript
    // Pop addr of pos
    // Add subscript to addr
    // Add member offset of x

}