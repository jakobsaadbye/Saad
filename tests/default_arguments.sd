import "fmt";

foo :: (a := 3) {
    print("%\n", a);
}

bar :: (a: bool, b: int, c: string, d: float) {
    print("% % % %\n", a, b, c, d);
}

baz :: (a: bool, b: int, c := 8, d := "Hellope") {
    print("% % % %\n", a, b, c, d);
}

Myprint2 :: (format: string, args: ...any) {
    Print(format, ...args);
}

defaultParametersNoPositionals :: () {
    print("\n------------ Default parameters (no positional arguments) --------------\n");
    foo();
    foo(5);
}

positionalArgumentsNoDefaults :: () {
    print("\n------------ Positional arguments (no default parameters) --------------\n");
        
    bar(d = 1, a = true, b = 4, c = "Positional arguments are cool");
    bar(true, 69, c = "Positional arguments needs to go last", d = 3.14);

    //
    // These should all error if commented in
    //
    // bar(a = 1, a = 2); // Positional argument 'a' is already given specified twice
    // bar(1, a = 2, b = 3, c = 4); // Positional argument 'a' is already given
    // bar(e = 1); // Unknown argument 'e'
    // bar(e = 1, 5); // Normal arguments needs to be specified before positional arguments

    //.\test.sd:24:20 error: Type mismatch. Wanted type bool, got type number
    //    24 |         bar(d = 1, a = 2, c = 3, b = 4);
    // bar(d = 1, a = 2, c = 3, b = 4);
}

positionalArgumentsWithDefaults :: () {
    print("\n------------ Positional arguments (with default parameters) --------------\n");

    baz(a = true, b = 5, c = 69);
    baz(true, 8);
    bar(
        a = true, 
        b = 6, 
        c = "Your mom", 
        d = 3.14,
    );
    
    
    // These should all error if commented in
    
    // baz(true); // Missing required parameter 'b'
}

normalVariadics :: () {
    print("\n------------ Normal variadics --------------\n");

    Myprint2("Hello % % %\n", "my", "old", "friends");
    
    myStrings: []any = ["A big house", "a dog", "a tesla"];
    Myprint2("Three most important things in life is: % % %\n", ...myStrings);
}

Myprint :: (format: string, args: ...any, newline := true, sayHello := false) {
    Print(format, ...args);

    if sayHello {
        Print(" (Hello) ");
    }
    if newline {
        Print("\n");
    }
}

variadicsWithDefaultArguments :: () {
    print("\n------------ Variadics with default arguments --------------\n");

    // Legal
    Myprint("%, %, %", "A big house", "a dog", "a tesla", newline = true, sayHello = true);

    myStrings: []any = ["penge", "cigaretter"];
    Myprint("Franke, du skylder mig % og %", ...myStrings);
    
}

main :: () {
    defaultParametersNoPositionals();

    positionalArgumentsNoDefaults();

    positionalArgumentsWithDefaults();

    normalVariadics();

    variadicsWithDefaultArguments();
}