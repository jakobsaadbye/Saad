Vector3 :: struct {
    x: int;
    y: int;
    z: int;
}

Color :: struct {
    r: u8;
    g: u8;
    b: u8;
    a: u8;
}

method_receiving_struct :: method (c: Color) -> Color {
    return {c.r - 5 , c.g - 5, c.b - 5, c.a - 5};
}

method_receiving_ptr_struct :: method (c: *Color) {
    c.r = 1;
    c.g = 2;
    c.b = 3;
    c.a = 4;
}

add :: method (a, b: Vector3) -> Vector3 {
    return {
        a.x + b.x,
        a.y + b.y,
        a.z + b.z,
    };
}

scale :: method (a: *Vector3, scalar: int) -> void {
    a.x *= scalar;
    a.y *= scalar;
    a.z *= scalar;
}

add_with_many_params :: method (a, b, c, d: Vector3) -> Vector3 {
    return a;
}

main :: () {
    {
        white     := Color{255, 255, 255, 255};
        white_ptr := &white;
    
        // 1: Pass struct and pointer to struct into receiver of type struct
        out1 := white.method_receiving_struct();
        out2 := white_ptr.method_receiving_struct();
    
        assert(out1.r == 250);
        assert(out1.g == 250);
        assert(out1.b == 250);
        assert(out1.a == 250);
    
        assert(out2.r == 250);
        assert(out2.g == 250);
        assert(out2.b == 250);
        assert(out2.a == 250);

    }
    {
        // 2: Pass struct and pointer to struct into receiver of type pointer to struct
        color1 := Color{255, 255, 255, 255};
        color2 := Color{255, 255, 255, 255};
        color2ptr := &color2;
    
        color1.method_receiving_ptr_struct();
        color2ptr.method_receiving_ptr_struct();
    
        assert(color1.r == 1);
        assert(color1.g == 2);
        assert(color1.b == 3);
        assert(color1.a == 4);
    
        assert(color2ptr.r == 1);
        assert(color2ptr.g == 2);
        assert(color2ptr.b == 3);
        assert(color2ptr.a == 4);
    }
    {
        a := Vector3{1, 2, 3};
        b := Vector3{4, 5, 6};
        c := a.add(b);
        print("%", c);
    }
    {
        a := Vector3{1, 2, 3};
        b := Vector3{4, 5, 6};
        aPtr := &a;
        c := aPtr.add(b);
        print("%", c);
    }
    {
        a := Vector3{1, 2, 3};
        a.scale(3);
        print("%", a);
    }
    {
        a := Vector3{1, 2, 3};
        b := Vector3{4, 5, 6};
        c := Vector3{7, 8, 9};
        d := Vector3{10, 11, 12};

        x := a.add_with_many_params(b, c, d);
        print("%", x);
    }
}